(this.webpackJsonpReactVideoRecordingAndScreenSharing=this.webpackJsonpReactVideoRecordingAndScreenSharing||[]).push([[0],{18:function(e,t,i){},20:function(e,t,i){},40:function(e,t,i){"use strict";i.r(t);var n,c=i(0),r=i(2),a=i.n(r),o=i(11),s=i.n(o),d=(i(18),i(4)),l=i.n(d),p=i(9),h=i(8),w=i(3),g=(i.p,i.p+"static/media/screen.04305a48.svg"),u=i.p+"static/media/video.433a10ed.svg",m=i.p+"static/media/record.44b2eb0e.svg",v=i.p+"static/media/default.fe61671c.svg",j=i.p+"static/media/live.41bc718e.svg",b=i.p+"static/media/microphone.49d8b474.svg",f=i.p+"static/media/microphonemuted.1360a123.svg",x=(i(20),i(21),i(6)),O=i.n(x),y=i(12),S=i(5),k=(document.getElementById("video"),[]);var R=function(){var e=new Date;e.setSeconds(e.getSeconds()+36e3);var t=Object(r.useState)(!1),i=Object(w.a)(t,2),a=i[0],o=i[1],s=Object(r.useState)(!1),d=Object(w.a)(s,2),R=d[0],T=d[1],N=Object(r.useState)(!1),I=Object(w.a)(N,2),C=I[0],M=I[1],H=Object(r.useState)(!1),E=Object(w.a)(H,2),A=E[0],U=E[1],V=Object(r.useState)(!1),z=Object(w.a)(V,2),L=z[0],W=z[1],_=Object(r.useState)("recorded"),q=Object(w.a)(_,2),D=q[0],B=q[1],F=Object(r.useState)(""),P=Object(w.a)(F,2),J=P[0],Y=P[1],G=Object(r.useState)(""),K=Object(w.a)(G,2),Q=K[0],X=K[1],Z=Object(r.useState)({}),$=Object(w.a)(Z,2),ee=$[0],te=$[1],ie=Object(y.useStopwatch)({expiryTimestamp:e}),ne=ie.minutes,ce=ie.hours,re=ie.seconds,ae=(ie.isRunning,ie.start),oe=ie.reset;function se(){return(se=Object(h.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{R||B("screen"),navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}).then(le,pe)}catch(t){console.error("Error: "+t)}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){if(!a&&R||a&&"screen"!==window.expanded){var e=1.77777777778*(window.innerHeight-125),t=(window.innerWidth-e)/2;t>0&&te(Object(p.a)(Object(p.a)({},ee),{},{left:t}))}}function le(e){o(!0);var t=document.querySelector("video#screen");window.stream=e,t.srcObject=e,R&&(clearInterval(J),Y(""),ue()),Q&&(clearInterval(Q),X(""),ue()),window.screenAspectRatio=e.getVideoTracks()[0].getSettings().aspectRatio;var i=window.setInterval((function(){return ge({recording:R,screenshare:!0,type:"screenshare",aspectRatio:e.getVideoTracks()[0].getSettings().aspectRatio,height:e.getVideoTracks()[0].getSettings().height,width:e.getVideoTracks()[0].getSettings().width})}),1e3/24);X(i),e.getVideoTracks()[0].addEventListener("ended",(function(){o(!1)}))}function pe(e){x.store.addNotification({title:e.message,message:" ",type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,onScreen:!0}})}function he(){return(he=Object(h.a)(l.a.mark((function e(t){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||B("recorded"),i={audio:{echoCancellation:{exact:!0}},video:{width:1280,height:720}},console.log("Using media constraints:",i),e.prev=3,e.next=6,navigator.mediaDevices.getUserMedia(i);case 6:we(e.sent),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),T(!1),console.error("navigator.getUserMedia error:",e.t0),pe(new Error("navigator.getUserMedia error:".concat(e.t0.toString())));case 15:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function we(e){if(T(!0),console.log("getUserMedia() got stream:",e),document.querySelector("video#recorded").srcObject=e,window.videoHeight=e.getVideoTracks()[0].getSettings().height,window.videoWidth=e.getVideoTracks()[0].getSettings().width,window.aspectRatio=e.getVideoTracks()[0].getSettings().aspectRatio,a)ge({recording:!0,screenshare:a});else{var t=window.setInterval((function(){return ge({recording:!0,screenshare:a})}),1e3/24);Y(t)}}function ge(e){var t=e.aspectRatio,i=e.width,n=e.height,c=(e.recording,e.screenshare,window.canvas=document.querySelector("canvas"));c.width=window.innerWidth,c.height=window.innerHeight-125;var r=document.querySelector("video#recorded"),a=document.querySelector("video#screen");if(window.recording&&window.screenshare)if("screen"==window.expanded){var o=(window.innerHeight-125)*t||window.screenAspectRatio,s=(window.innerWidth-o)/2;s=s>0?s:0,c.getContext("2d").drawImage(a,s,0,(window.innerHeight-125)*(t||window.screenAspectRatio),window.innerHeight-125),c.getContext("2d").drawImage(r,window.innerWidth-134400/720-50,window.innerHeight-125-150,134400/720,105)}else{var d=(window.innerHeight-125)*window.aspectRatio,l=window.innerHeight-125,p=(window.innerWidth-d)/2;p=p>0?p:0,c.getContext("2d").drawImage(r,p,0,d,l),c.getContext("2d").drawImage(a,window.innerWidth-134400/720-50,window.innerHeight-125-150,105*i/n,105)}else{if(window.recording){var h=(window.innerHeight-125)*window.aspectRatio,w=window.innerHeight-125,g=(window.innerWidth-h)/2;g=g>0?g:0,c.getContext("2d").drawImage(r,g,0,h,w)}if(window.screenshare){var u=(window.innerHeight-125)*(t||window.screenAspectRatio),m=(window.innerWidth-u)/2;m=m>0?m:0,c.getContext("2d").drawImage(a,m,0,(window.innerHeight-125)*(t||window.screenAspectRatio),window.innerHeight-125)}}}function ue(){window.canvas.getContext("2d").clearRect(0,0,window.canvas.width,window.canvas.height)}function me(e){console.log("handleDataAvailable",e),e.data&&e.data.size>0&&k.push(e.data)}return ie.restart,window.screenshare=a,window.recording=R,window.expanded=D,Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,echoCancellation:{exact:!0}}).then((function(e){window.audioStream=e})),U(!0),de()}),[]),Object(r.useEffect)((function(){de()}),[R,a,D]),window.addEventListener("resize",de),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(O.a,{}),Object(c.jsxs)("header",{className:"App-header",id:"content",style:{overflow:"hidden"},children:[R||a?null:Object(c.jsxs)("div",{style:{marginTop:-115},children:[Object(c.jsx)("img",{src:v,width:"400px",height:"auto"}),Object(c.jsx)("div",{className:"circular text-center",style:{marginTop:30},children:"You are not sharing anything"})]}),Object(c.jsx)("div",{className:"overlay",style:{background:R||a?"#f5f5f538":"whitesmoke"}}),Object(c.jsxs)("div",{className:"action-buttons",children:[Object(c.jsx)("div",{"data-tip":!0,"data-for":"shareScreen",onClick:function(){return a?function(){var e=document.querySelector("video#screen");R||clearInterval(Q),e.srcObject.getTracks().forEach((function(e){return e.stop()})),o(!1),ue()}():function(){return se.apply(this,arguments)}()},className:"circular start",id:a?"stop":"start",children:Object(c.jsx)("img",{src:g,width:"30px",height:"30px",className:"v-middle"})}),Object(c.jsx)(S.a,{id:"shareScreen",type:"dark",place:"top",effect:"solid",children:Object(c.jsx)("span",{className:"circular",style:{fontSize:15},children:a?"Stop screen":"Share screen"})}),Object(c.jsx)("div",{"data-tip":!0,"data-for":"recording",onClick:function(){return R?function(){var e=document.querySelector("video#recorded");J&&clearInterval(J),e.srcObject.getTracks().forEach((function(e){return e.stop()})),T(!1),ue()}():function(e){return he.apply(this,arguments)}()},className:"circular start2",id:R?"stop":"start",children:Object(c.jsx)("img",{src:u,width:"30px",height:"30px",className:"v-middle"})}),Object(c.jsx)(S.a,{id:"recording",type:"dark",place:"top",effect:"solid",children:Object(c.jsx)("span",{className:"circular",style:{fontSize:15},children:R?" Stop video":"Share video"})}),Object(c.jsx)("div",{"data-tip":!0,"data-for":"audio",onClick:function(){A&&(window.audioStream.getAudioTracks()[0].enabled=!L,W(!L))},className:"circular start3",id:L?"start":"stop",children:Object(c.jsx)("img",{src:L?f:b,width:"30px",height:"30px",className:"v-middle"})}),Object(c.jsx)(S.a,{id:"audio",type:"dark",place:"top",effect:"solid",children:Object(c.jsx)("span",{className:"circular",style:{fontSize:15},children:L?"Unmute micophone":"Mute micophone"})}),Object(c.jsx)("div",{"data-tip":!0,"data-for":"storing",onClick:function(){return C?void n.stop():function(){k=[];var e={mimeType:"video/webm;codecs=vp9,opus"};MediaRecorder.isTypeSupported(e.mimeType)||(console.error("".concat(e.mimeType," is not supported")),e={mimeType:"video/webm;codecs=vp8,opus"},MediaRecorder.isTypeSupported(e.mimeType)||(console.error("".concat(e.mimeType," is not supported")),e={mimeType:"video/webm"},MediaRecorder.isTypeSupported(e.mimeType)||(console.error("".concat(e.mimeType," is not supported")),e={mimeType:""})));try{var t=window.canvas.captureStream(),i=new MediaStream([window.audioStream.getAudioTracks()[0],t.getVideoTracks()[0]]);n=new MediaRecorder(i,e)}catch(c){return console.error("Exception while creating MediaRecorder:",c),void pe(new Error("Exception while creating MediaRecorder: ".concat(JSON.stringify(c))))}console.log("Created MediaRecorder",n,"with options",e),n.onstop=function(e){console.log("Recorder stopped: ",e),console.log("Recorded Blobs: ",k);var t=new Blob(k,{type:"video/webm"}),i=window.URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=i,n.download="test.webm",document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(i)}),100),M(!1),oe()},n.ondataavailable=me,n.start(),M(!0),console.log("MediaRecorder started",n),ae()}()},className:"circular start3 ".concat(R||a||C?null:"disabled"),id:C?"stop":"start",children:Object(c.jsx)("img",{src:m,width:"30px",height:"30px",className:"v-middle"})}),Object(c.jsx)(S.a,{id:"storing",type:"dark",place:"top",effect:"solid",children:Object(c.jsx)("span",{className:"circular",style:{fontSize:15},children:C?"Stop recording":"Start recording"})})]}),Object(c.jsx)("video",{id:"screen",className:"".concat("recorded"==D&&"bottom-right"),autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",visibility:"hidden",height:0}}),Object(c.jsx)("video",{id:"recorded",className:"".concat("screen"==D&&"bottom-right"),playsInline:!0,autoPlay:!0,muted:!0,style:{position:"absolute",visibility:"hidden",height:0}}),Object(c.jsx)("div",{id:"errorMsg"}),a&&R&&Object(c.jsx)("div",{style:{right:20,top:20,zIndex:22},className:"switch v-middle",onClick:function(){return B("screen"==D?"recorded":"screen")},children:Object(c.jsxs)("div",{className:"switch-div",children:[Object(c.jsx)("img",{src:"https://image.flaticon.com/icons/svg/125/125868.svg",width:"20px",height:"20px",className:"v-middle",style:{marginRight:10,marginLeft:3}}),Object(c.jsx)("span",{className:"circular v-middle",style:{fontSize:17,marginTop:-1},children:"Switch views"})]})}),C&&Object(c.jsx)("div",{id:"animate-flicker",style:{left:20,top:8,zIndex:22,position:"fixed"},title:"Recording",children:Object(c.jsx)("img",{src:j,width:"50px",height:"50px",className:"v-middle"})}),Object(c.jsx)("canvas",{style:{zIndex:10,position:R||a?!a&&R||a&&"screen"!==window.expanded?"absolute":"null":"absolute",top:0}}),C&&Object(c.jsxs)("div",{className:"timer circular",style:{color:"#f3f1f1"},children:[Object(c.jsxs)("div",{style:{display:"inline-block"},children:[ce<=9?"0"+ce:ce,":"]}),Object(c.jsxs)("div",{style:{display:"inline-block"},children:[ne<=9?Object(c.jsxs)("span",{children:["0",ne]}):ne,":"]}),Object(c.jsx)("div",{style:{display:"inline-block"},children:re<=9?"0"+re:re})]})]})]})},T=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,42)).then((function(t){var i=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;i(e),n(e),c(e),r(e),a(e)}))};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(R,{})}),document.getElementById("root")),T()}},[[40,1,2]]]);
//# sourceMappingURL=main.ff1382e1.chunk.js.map