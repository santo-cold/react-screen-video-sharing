(this.webpackJsonpReactVideoRecordingAndScreenSharing=this.webpackJsonpReactVideoRecordingAndScreenSharing||[]).push([[0],{18:function(e,t,i){},20:function(e,t,i){},40:function(e,t,i){"use strict";i.r(t);var n,c=i(0),r=i(2),a=i.n(r),o=i(11),s=i.n(o),d=(i(18),i(4)),l=i.n(d),p=i(9),h=i(8),w=i(3),g=(i.p,i.p+"static/media/screen.04305a48.svg"),u=i.p+"static/media/screenOut.e910bb34.svg",m=i.p+"static/media/video.433a10ed.svg",v=i.p+"static/media/videoOut.340e0b45.svg",j=i.p+"static/media/record.44b2eb0e.svg",b=i.p+"static/media/default.fe61671c.svg",f=i.p+"static/media/live.41bc718e.svg",x=i.p+"static/media/microphone.49d8b474.svg",O=i.p+"static/media/microphonemuted.cdc8e750.svg",y=(i.p,i(20),i(21),i(6)),S=i.n(y),k=i(12),T=i(5),R=(document.getElementById("video"),[]);var N=function(){var e=new Date;e.setSeconds(e.getSeconds()+36e3);var t=Object(r.useState)(!1),i=Object(w.a)(t,2),a=i[0],o=i[1],s=Object(r.useState)(!1),d=Object(w.a)(s,2),N=d[0],I=d[1],C=Object(r.useState)(!1),M=Object(w.a)(C,2),H=M[0],E=M[1],A=Object(r.useState)(!1),z=Object(w.a)(A,2),V=z[0],L=z[1],U=Object(r.useState)(!1),W=Object(w.a)(U,2),_=W[0],q=W[1],D=Object(r.useState)("recorded"),B=Object(w.a)(D,2),F=B[0],P=B[1],J=Object(r.useState)(""),Y=Object(w.a)(J,2),G=Y[0],K=Y[1],Q=Object(r.useState)(""),X=Object(w.a)(Q,2),Z=X[0],$=X[1],ee=Object(r.useState)({}),te=Object(w.a)(ee,2),ie=te[0],ne=te[1],ce=Object(k.useStopwatch)({expiryTimestamp:e}),re=ce.minutes,ae=ce.hours,oe=ce.seconds,se=(ce.isRunning,ce.start),de=ce.reset;ce.restart,window.screenshare=a,window.recording=N,window.expanded=F;var le=110;function pe(){return(pe=Object(h.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{N||P("screen"),navigator.mediaDevices.getDisplayMedia({video:!0}).then(we,ge)}catch(t){console.error("Error: "+t)}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){if(!a&&N||a&&"screen"!==window.expanded){var e=1.77777777778*(window.innerHeight-125),t=(window.innerWidth-e)/2;t>0&&ne(Object(p.a)(Object(p.a)({},ie),{},{left:t}))}}function we(e){o(!0);var t=document.querySelector("video#screen");window.stream=e,t.srcObject=e,N&&(clearInterval(G),K(""),je()),Z&&(clearInterval(Z),$(""),je()),window.screenAspectRatio=e.getVideoTracks()[0].getSettings().aspectRatio;var i=window.setInterval((function(){return ve({recording:N,screenshare:!0,type:"screenshare",aspectRatio:e.getVideoTracks()[0].getSettings().aspectRatio,height:e.getVideoTracks()[0].getSettings().height,width:e.getVideoTracks()[0].getSettings().width})}),50);$(i),e.getVideoTracks()[0].addEventListener("ended",(function(){o(!1)}))}function ge(e){y.store.addNotification({title:e.message,message:" ",type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,onScreen:!0}})}function ue(){return(ue=Object(h.a)(l.a.mark((function e(t){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||P("recorded"),i={audio:{echoCancellation:{exact:!0}},video:{width:1280,height:720}},console.log("Using media constraints:",i),e.prev=3,e.next=6,navigator.mediaDevices.getUserMedia(i);case 6:me(e.sent),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),I(!1),console.error("navigator.getUserMedia error:",e.t0),ge(new Error("navigator.getUserMedia error:".concat(e.t0.toString())));case 15:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function me(e){if(I(!0),document.querySelector("video#recorded").srcObject=e,window.videoHeight=e.getVideoTracks()[0].getSettings().height,window.videoWidth=e.getVideoTracks()[0].getSettings().width,window.aspectRatio=e.getVideoTracks()[0].getSettings().aspectRatio,a)ve({recording:!0,screenshare:a});else{var t=window.setInterval((function(){return ve({recording:!0,screenshare:a})}),50);K(t)}}function ve(e){var t=e.aspectRatio,i=e.width,n=e.height,c=(e.recording,e.screenshare,window.canvas=document.querySelector("canvas"));c.width=window.innerWidth,c.height=window.innerHeight-le;var r=document.querySelector("video#recorded"),a=document.querySelector("video#screen");if(window.recording&&window.screenshare)if("screen"==window.expanded){var o=(window.innerHeight-le)*t||window.screenAspectRatio,s=(window.innerWidth-o)/2;s=s>0?s:0,c.getContext("2d").drawImage(a,s,0,(window.innerHeight-le)*(t||window.screenAspectRatio),window.innerHeight-le),c.getContext("2d").drawImage(r,window.innerWidth-134400/720-50,window.innerHeight-le-150,134400/720,105)}else{var d=(window.innerHeight-le)*window.aspectRatio,l=window.innerHeight-le,p=(window.innerWidth-d)/2;p=p>0?p:0,c.getContext("2d").drawImage(r,p,0,d,l),c.getContext("2d").drawImage(a,window.innerWidth-134400/720-50,window.innerHeight-le-150,105*i/n,105)}else{if(window.recording){var h=(window.innerHeight-le)*window.aspectRatio,w=window.innerHeight-le,g=(window.innerWidth-h)/2;g=g>0?g:0,c.getContext("2d").drawImage(r,g,0,h,w)}if(window.screenshare){var u=(window.innerHeight-le)*(t||window.screenAspectRatio),m=(window.innerWidth-u)/2;m=m>0?m:0,c.getContext("2d").drawImage(a,m,0,(window.innerHeight-le)*(t||window.screenAspectRatio),window.innerHeight-le)}}}function je(){window.canvas.getContext("2d").clearRect(0,0,window.canvas.width,window.canvas.height)}function be(e){e.data&&e.data.size>0&&R.push(e.data)}return Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,echoCancellation:{exact:!0}}).then((function(e){window.audioStream=e})),L(!0),he()}),[]),Object(r.useEffect)((function(){he()}),[N,a,F]),window.addEventListener("resize",he),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(S.a,{}),Object(c.jsxs)("header",{className:"App-header",id:"content",style:{overflow:"hidden"},children:[N||a?null:Object(c.jsxs)("div",{style:{marginTop:-110,textAlign:"center"},children:[Object(c.jsx)("img",{src:b,width:"350px",height:"auto"}),Object(c.jsx)("div",{className:"circular text-center",style:{marginTop:35},children:"You are not sharing anything"})]}),Object(c.jsx)("div",{className:"overlay",style:{background:N||a?"#f5f5f538":"whitesmoke"}}),Object(c.jsxs)("div",{className:"action-buttons",children:[Object(c.jsx)("div",{"data-tip":!0,"data-for":"shareScreen",onClick:function(){return a?function(){var e=document.querySelector("video#screen");N||clearInterval(Z),e.srcObject.getTracks().forEach((function(e){return e.stop()})),o(!1),je()}():function(){return pe.apply(this,arguments)}()},className:"circular start",id:a?"stop":"start",children:Object(c.jsx)("img",{src:a?g:u,width:"30px",height:"30px",className:"v-middle",style:{marginLeft:!a&&-2}})}),Object(c.jsx)(T.a,{id:"shareScreen",type:"dark",place:"top",effect:"solid",children:Object(c.jsx)("span",{className:"circular",style:{fontSize:15},children:a?"Stop screen":"Share screen"})}),Object(c.jsx)("div",{"data-tip":!0,"data-for":"recording",onClick:function(){return N?function(){var e=document.querySelector("video#recorded");G&&clearInterval(G),e.srcObject.getTracks().forEach((function(e){return e.stop()})),I(!1),je()}():function(e){return ue.apply(this,arguments)}()},className:"circular start2",id:N?"stop":"start",children:Object(c.jsx)("img",{src:N?m:v,width:"30px",height:"30px",className:"v-middle"})}),Object(c.jsx)(T.a,{id:"recording",type:"dark",place:"top",effect:"solid",children:Object(c.jsx)("span",{className:"circular",style:{fontSize:15},children:N?" Stop video":"Share video"})}),Object(c.jsxs)("div",{"data-tip":!0,"data-for":"audio",onClick:function(){V&&(window.audioStream.getAudioTracks()[0].enabled=!_,q(!_))},className:"circular start3",id:_?"start":"stop",children:[Object(c.jsx)("img",{src:_?O:x,width:"30px",height:"30px",className:"v-middle"}),Object(c.jsx)("div",{style:{marginTop:19,fontWeight:100,color:"grey",fontSize:"0.7rem"},children:_&&"Muted"})]}),Object(c.jsx)(T.a,{id:"audio",type:"dark",place:"top",effect:"solid",children:Object(c.jsx)("span",{className:"circular",style:{fontSize:15},children:_?"Unmute micophone":"Mute micophone"})}),Object(c.jsx)("div",{"data-tip":!0,"data-for":"storing",onClick:function(){return H?void n.stop():function(){R=[];var e={mimeType:"video/webm;codecs=vp9,opus"};MediaRecorder.isTypeSupported(e.mimeType)||(console.error("".concat(e.mimeType," is not supported")),e={mimeType:"video/webm;codecs=vp8,opus"},MediaRecorder.isTypeSupported(e.mimeType)||(console.error("".concat(e.mimeType," is not supported")),e={mimeType:"video/webm"},MediaRecorder.isTypeSupported(e.mimeType)||(console.error("".concat(e.mimeType," is not supported")),e={mimeType:""})));try{var t=window.canvas.captureStream(),i=new MediaStream([window.audioStream.getAudioTracks()[0],t.getVideoTracks()[0]]);n=new MediaRecorder(i,e)}catch(c){return console.error("Exception while creating MediaRecorder:",c),void ge(new Error("Exception while creating MediaRecorder: ".concat(JSON.stringify(c))))}console.log("Created MediaRecorder",n,"with options",e),n.onstop=function(e){console.log("Recorder stopped: ",e);var t=new Blob(R,{type:"video/webm"}),i=window.URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=i,n.download="test.webm",document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(i)}),100),E(!1),de()},n.ondataavailable=be,n.start(),E(!0),se()}()},className:"circular start3 ".concat(N||a||H?null:"disabled"),id:H?"stop":"start",children:Object(c.jsx)("img",{src:j,width:"30px",height:"30px",className:"v-middle"})}),Object(c.jsx)(T.a,{id:"storing",type:"dark",place:"top",effect:"solid",children:Object(c.jsx)("span",{className:"circular",style:{fontSize:15},children:H?"Stop recording":"Start recording"})})]}),Object(c.jsx)("video",{id:"screen",className:"".concat("recorded"==F&&"bottom-right"),autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",visibility:"hidden",height:0}}),Object(c.jsx)("video",{id:"recorded",className:"".concat("screen"==F&&"bottom-right"),playsInline:!0,autoPlay:!0,muted:!0,style:{position:"absolute",visibility:"hidden",height:0}}),Object(c.jsx)("div",{id:"errorMsg"}),a&&N&&Object(c.jsx)("div",{style:{right:20,top:20,zIndex:22},className:"switch v-middle",onClick:function(){return P("screen"==F?"recorded":"screen")},children:Object(c.jsxs)("div",{className:"switch-div",children:[Object(c.jsx)("img",{src:"https://image.flaticon.com/icons/svg/125/125868.svg",width:"20px",height:"20px",className:"v-middle",style:{marginRight:10,marginLeft:3}}),Object(c.jsx)("span",{className:"circular v-middle",style:{fontSize:17,marginTop:-1},children:"Switch views"})]})}),H&&Object(c.jsx)("div",{id:"animate-flicker",style:{left:20,top:8,zIndex:22,position:"fixed"},title:"Recording",children:Object(c.jsx)("img",{src:f,width:"50px",height:"50px",className:"v-middle"})}),Object(c.jsx)("canvas",{style:{zIndex:10,position:N||a?!a&&N||a&&"screen"!==window.expanded?"absolute":"null":"absolute",top:0}}),H&&Object(c.jsxs)("div",{className:"timer circular",style:{color:"#f3f1f1"},children:[Object(c.jsxs)("div",{style:{display:"inline-block"},children:[ae<=9?"0"+ae:ae,":"]}),Object(c.jsxs)("div",{style:{display:"inline-block"},children:[re<=9?Object(c.jsxs)("span",{children:["0",re]}):re,":"]}),Object(c.jsx)("div",{style:{display:"inline-block"},children:oe<=9?"0"+oe:oe})]})]})]})},I=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,42)).then((function(t){var i=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;i(e),n(e),c(e),r(e),a(e)}))};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(N,{})}),document.getElementById("root")),I()}},[[40,1,2]]]);
//# sourceMappingURL=main.b434b1e0.chunk.js.map